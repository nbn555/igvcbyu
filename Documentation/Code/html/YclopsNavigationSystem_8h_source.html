<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>YClops: YclopsNavigationSystem.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">YClops&#160;<span id="projectnumber">0.1</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>YclopsNavigationSystem.h</h1>  </div>
</div>
<div class="contents">
<a href="YclopsNavigationSystem_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00002"></a>00002 <span class="comment">/*</span>
<a name="l00003"></a>00003 <span class="comment"> * Yclopsnav.h</span>
<a name="l00004"></a>00004 <span class="comment"> *</span>
<a name="l00005"></a>00005 <span class="comment"> *  Created on: Dec 9, 2010</span>
<a name="l00006"></a>00006 <span class="comment"> *      Author: igvcbyu</span>
<a name="l00007"></a>00007 <span class="comment"> */</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="preprocessor">#ifndef YCLOPSNAV_H_</span>
<a name="l00010"></a>00010 <span class="preprocessor"></span><span class="preprocessor">#define YCLOPSNAV_H_</span>
<a name="l00011"></a>00011 <span class="preprocessor"></span>
<a name="l00012"></a>00012 
<a name="l00013"></a>00013 <span class="preprocessor">#include &lt;mrpt/maps.h&gt;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &lt;mrpt/poses.h&gt;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;mrpt/math.h&gt;</span>
<a name="l00016"></a>00016 <span class="preprocessor">#include &lt;mrpt/synch.h&gt;</span>
<a name="l00017"></a>00017 <span class="preprocessor">#include &lt;mrpt/reactivenav.h&gt;</span>
<a name="l00018"></a>00018 
<a name="l00019"></a><a class="code" href="namespacemrpt.html">00019</a> <span class="keyword">namespace </span>mrpt
<a name="l00020"></a>00020 {
<a name="l00021"></a><a class="code" href="namespacemrpt_1_1reactivenav.html">00021</a>         <span class="keyword">namespace </span>reactivenav
<a name="l00022"></a>00022         {
<a name="l00042"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html">00042</a>                 <span class="keyword">class </span>REACTIVENAV_IMPEXP  <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html">YclopsNavigationSystem</a> : <span class="keyword">public</span> CAbstractReactiveNavigationSystem
<a name="l00043"></a>00043                 {
<a name="l00044"></a>00044                 <span class="keyword">public</span>:
<a name="l00045"></a>00045                         EIGEN_MAKE_ALIGNED_OPERATOR_NEW
<a name="l00051"></a>00051                         <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html">YclopsNavigationSystem</a>(
<a name="l00052"></a>00052                                 CReactiveInterfaceImplementation   &amp;react_iterf_impl,
<a name="l00053"></a>00053                                 <span class="keywordtype">bool</span>                                    enableConsoleOutput = <span class="keyword">true</span>,
<a name="l00054"></a>00054                                 <span class="keywordtype">bool</span>                                    enableLogFile = <span class="keyword">false</span>);
<a name="l00055"></a>00055 
<a name="l00058"></a>00058                         <span class="keyword">virtual</span> ~YclopsNavigationSystem();
<a name="l00059"></a>00059 
<a name="l00062"></a>00062                         <span class="keywordtype">void</span> loadConfigFile(<span class="keyword">const</span> mrpt::utils::CConfigFileBase &amp;ini, <span class="keyword">const</span> mrpt::utils::CConfigFileBase &amp;robotIni);
<a name="l00063"></a>00063 
<a name="l00067"></a>00067                         <span class="keywordtype">void</span> initialize();
<a name="l00068"></a>00068 
<a name="l00071"></a>00071                         <span class="keywordtype">float</span>  evaluate( TNavigationParams *params );
<a name="l00072"></a>00072 
<a name="l00075"></a>00075                         <span class="keywordtype">void</span>  navigate( TNavigationParams *params );
<a name="l00076"></a>00076 
<a name="l00079"></a>00079                         <span class="keywordtype">void</span>  setParams( TNavigationParams *params );
<a name="l00080"></a>00080 
<a name="l00086"></a>00086                         <span class="keywordtype">void</span> setFileName(std::string &amp; fileName, <span class="keywordtype">bool</span> inMeters);
<a name="l00087"></a>00087 
<a name="l00094"></a>00094                         <span class="keywordtype">void</span> setup();
<a name="l00095"></a>00095 
<a name="l00099"></a>00099                         <span class="keywordtype">void</span> stop();
<a name="l00100"></a>00100 
<a name="l00101"></a>00101                         <span class="comment">/*</span>
<a name="l00102"></a>00102 <span class="comment">                         * choose which challenge to run, TRUE is Navigation, FALSE is Autonomous</span>
<a name="l00103"></a>00103 <span class="comment">                         */</span>
<a name="l00104"></a>00104                         <span class="keywordtype">void</span> setChallenge(<span class="keywordtype">bool</span> c);
<a name="l00105"></a>00105 
<a name="l00106"></a>00106                         <span class="comment">/*</span>
<a name="l00107"></a>00107 <span class="comment">                         * get the current target from the navigation system</span>
<a name="l00108"></a>00108 <span class="comment">                         */</span>
<a name="l00109"></a>00109                         <span class="keywordtype">void</span> getTarget(mrpt::poses::TPoint2D *target);
<a name="l00110"></a>00110 
<a name="l00114"></a>00114                         <span class="keywordtype">void</span> setHolonomicMethod(
<a name="l00115"></a>00115                                 THolonomicMethod        method,
<a name="l00116"></a>00116                                 <span class="keyword">const</span> <span class="keywordtype">char</span>                      *config_INIfile = <span class="stringliteral">&quot;./CONFIG_ReactiveNavigator.ini&quot;</span>);
<a name="l00117"></a>00117 
<a name="l00121"></a>00121                         <span class="keywordtype">void</span> changeRobotShape( math::CPolygon &amp;shape );
<a name="l00122"></a>00122 
<a name="l00126"></a>00126                         <span class="keywordtype">void</span> getLastLogRecord( CLogFileRecord &amp;o );
<a name="l00127"></a>00127 
<a name="l00128"></a>00128 
<a name="l00131"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a53df3608d184757397fe3f8dab6f674e">00131</a>             <span class="keyword">enum</span> <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a53df3608d184757397fe3f8dab6f674e">TNavigatorBehavior</a>
<a name="l00132"></a>00132             {
<a name="l00135"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a53df3608d184757397fe3f8dab6f674ea6200a6610175097a71e37e2d55f2b051">00135</a>                 beNormalNavigation = 0,
<a name="l00138"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a53df3608d184757397fe3f8dab6f674ead625ba6e8df985b581a40de166d58820">00138</a>                 <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a53df3608d184757397fe3f8dab6f674ead625ba6e8df985b581a40de166d58820">beHeadDirection</a>,
<a name="l00141"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a53df3608d184757397fe3f8dab6f674ea77607a225be588da4b0955f6b5bcb279">00141</a>                 <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a53df3608d184757397fe3f8dab6f674ea77607a225be588da4b0955f6b5bcb279">beDoorCrosing1</a>,
<a name="l00144"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a53df3608d184757397fe3f8dab6f674ea58d45d59d3f4a976fc5a2c42d608e16c">00144</a>                 <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a53df3608d184757397fe3f8dab6f674ea58d45d59d3f4a976fc5a2c42d608e16c">beDoorCrosing2</a>,
<a name="l00147"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a53df3608d184757397fe3f8dab6f674ea92c10203d2b27f05b5b1838002ad6ded">00147</a>                 beDoorCrosing3
<a name="l00148"></a>00148             };
<a name="l00149"></a>00149 
<a name="l00152"></a>00152                         <span class="keywordtype">void</span> enableLogFile(<span class="keywordtype">bool</span> enable);
<a name="l00153"></a>00153 
<a name="l00154"></a>00154                 <span class="keyword">private</span>:
<a name="l00155"></a>00155                         <span class="comment">// ------------------------------------------------------</span>
<a name="l00156"></a>00156                         <span class="comment">//                                      PRIVATE DEFINITIONS</span>
<a name="l00157"></a>00157                         <span class="comment">// ------------------------------------------------------</span>
<a name="l00158"></a>00158 
<a name="l00159"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a0c281e546dc01896f4fd25b1e17512e8">00159</a>                         <span class="keywordtype">bool</span> <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a0c281e546dc01896f4fd25b1e17512e8">NavChallenge</a>;<span class="comment">//TRUE is Navigation, FALSE is Autonomous</span>
<a name="l00160"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a2578c5eea80bd9db7850cc0b726d3235">00160</a>                         <span class="keywordtype">float</span>                                   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a2578c5eea80bd9db7850cc0b726d3235">targetAllowedDistance</a>;
<a name="l00161"></a>00161 
<a name="l00162"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#abddc90f0706eb8b30a55255c28ce531b">00162</a>                         mrpt::aligned_containers&lt;mrpt::poses::CPoint2D&gt;::vector_t <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#abddc90f0706eb8b30a55255c28ce531b">points</a>;
<a name="l00166"></a>00166                         <span class="keywordtype">void</span> gotoNextPoint();
<a name="l00169"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#afb074fd13ce2a8d5b592d43e5d576b45">00169</a>             <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a53df3608d184757397fe3f8dab6f674e">TNavigatorBehavior</a>          <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#afb074fd13ce2a8d5b592d43e5d576b45">navigatorBehavior</a>;
<a name="l00170"></a>00170 
<a name="l00173"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ac3f5395e78debab87eaca1cc16e30106">00173</a>             <span class="keywordtype">float</span>                                       <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ac3f5395e78debab87eaca1cc16e30106">m_beHeadDirection_rad</a>;
<a name="l00174"></a>00174 
<a name="l00177"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ae3935e576f76c110cb009d1147793d62">00177</a>             CPoint2D                            <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ae3935e576f76c110cb009d1147793d62">m_beAuxTarget</a>;
<a name="l00178"></a>00178 
<a name="l00179"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#accc4a56252b3c260fc198a821b94d038">00179</a>             std::string <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#accc4a56252b3c260fc198a821b94d038">fileName</a>;
<a name="l00180"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ab7fe44961809203c745ce4e9cb251b8b">00180</a>             <span class="keywordtype">bool</span> <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ab7fe44961809203c745ce4e9cb251b8b">inMeters</a>;
<a name="l00181"></a>00181 
<a name="l00184"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a4e623cd3284f9bb12980f036c4b4ef76">00184</a>             CPoint2D                            m_bePassPoint1,<a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a4e623cd3284f9bb12980f036c4b4ef76">m_bePassPoint2</a>;
<a name="l00185"></a>00185 
<a name="l00188"></a><a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html">00188</a>                         <span class="keyword">struct </span><a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html">THolonomicMovement</a> {
<a name="l00189"></a><a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html#a887e290875573534653512f6e8e3b642">00189</a>                                         CParameterizedTrajectoryGenerator               *<a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html#a887e290875573534653512f6e8e3b642">PTG</a>;   
<a name="l00190"></a><a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html#a4a274d40296bd0eabd15da818411271a">00190</a>                                         <span class="keywordtype">double</span>  direction, <a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html#a4a274d40296bd0eabd15da818411271a">speed</a>;       
<a name="l00191"></a><a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html#ad2d200f1ee4ce99231697b9548751a8d">00191</a>                                         <span class="keywordtype">double</span>  <a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html#ad2d200f1ee4ce99231697b9548751a8d" title="The holonomic movement.">evaluation</a>;     
<a name="l00192"></a>00192                         };
<a name="l00193"></a>00193 
<a name="l00196"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a5b3d49bd39bea49b135fd440961a2d42">00196</a>                         CLogFileRecord          <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a5b3d49bd39bea49b135fd440961a2d42">lastLogRecord</a>;
<a name="l00197"></a>00197 
<a name="l00200"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a727f3a25797bcb3949a2e6fec805e917">00200</a>                         <span class="keywordtype">float</span>           last_cmd_v,<a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a727f3a25797bcb3949a2e6fec805e917">last_cmd_w</a>;
<a name="l00201"></a>00201 
<a name="l00204"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ab3cfbf014917e10f1910d1e225c2a9e5">00204</a>                         <span class="keywordtype">bool</span>            <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ab3cfbf014917e10f1910d1e225c2a9e5">navigationEndEventSent</a>;
<a name="l00205"></a>00205 
<a name="l00208"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a097ecbd78f816ce0a0873559226a8fe0">00208</a>             synch::CCriticalSection  m_critZoneLastLog,<a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a097ecbd78f816ce0a0873559226a8fe0">m_critZoneNavigating</a>;
<a name="l00209"></a>00209 
<a name="l00210"></a>00210                         <span class="comment">// ------------------------------------------------------</span>
<a name="l00211"></a>00211                         <span class="comment">//                                      PRIVATE METHODS</span>
<a name="l00212"></a>00212                         <span class="comment">// ------------------------------------------------------</span>
<a name="l00215"></a>00215 <span class="comment"></span>                        <span class="keywordtype">void</span>  performNavigationStep( );
<a name="l00216"></a>00216 
<a name="l00217"></a>00217 
<a name="l00218"></a>00218                         <span class="comment">// ------------------------------------------------------</span>
<a name="l00219"></a>00219                         <span class="comment">//                                      PRIVATE VARIABLES</span>
<a name="l00220"></a>00220                         <span class="comment">// ------------------------------------------------------</span>
<a name="l00223"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#af3ab0ad564e236f8267c0ecc5679495a">00223</a> <span class="comment"></span>                        CAbstractHolonomicReactiveMethod        *<a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#af3ab0ad564e236f8267c0ecc5679495a">holonomicMethod</a>;
<a name="l00226"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a7aa921ed8f143f60347c02cfff877304">00226</a>                         utils::CStream                                          *<a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a7aa921ed8f143f60347c02cfff877304">logFile</a>;
<a name="l00229"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a45918ce2f6f74ec3e8fd574169a38d59">00229</a>                         <span class="keywordtype">bool</span> <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a45918ce2f6f74ec3e8fd574169a38d59">enableConsoleOutput</a>;
<a name="l00230"></a>00230 
<a name="l00231"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#aaa5c8857953ddc93ed9a055e4d9c5c14">00231</a>                         CTicTac <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#aaa5c8857953ddc93ed9a055e4d9c5c14">timerForExecutionPeriod</a>;
<a name="l00232"></a>00232 
<a name="l00233"></a>00233                         <span class="comment">// Loaded from INI file:</span>
<a name="l00234"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#afdbb372127791056659c3871cb64d7a9">00234</a>                         std::string <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#afdbb372127791056659c3871cb64d7a9">robotName</a>;                          <span class="comment">// El nombre del robot donde estamos</span>
<a name="l00235"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a3d0722a142d0346ede48412256278cba">00235</a>                         <span class="keywordtype">float</span>   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a3d0722a142d0346ede48412256278cba">refDistance</a>;                            <span class="comment">// &quot;dmax&quot; in papers.</span>
<a name="l00236"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a47bccecb1fb90325fb773b46157e16d4">00236</a>                         <span class="keywordtype">float</span>   colGridRes_x,<a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a47bccecb1fb90325fb773b46157e16d4">colGridRes_y</a>;  <span class="comment">// Resolucion de la rejilla de distancias de choque precalculadas</span>
<a name="l00237"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a91bd2792a82fa7b88738089386a37b5e">00237</a>                         <span class="keywordtype">float</span>   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a91bd2792a82fa7b88738089386a37b5e">robotMax_V_mps</a>;                         <span class="comment">// Max. vel del robot en m/s</span>
<a name="l00238"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ab393fd8cd596c841aca8739b6b22bd9b">00238</a>                         <span class="keywordtype">float</span>   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ab393fd8cd596c841aca8739b6b22bd9b">robotMax_W_degps</a>;              <span class="comment">// Max. vel del robot en rad/s</span>
<a name="l00239"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ac2804a9e10302d109f2bb15ff30c6e90">00239</a>                         <span class="keywordtype">float</span>   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ac2804a9e10302d109f2bb15ff30c6e90">ROBOTMODEL_TAU</a>,ROBOTMODEL_DELAY; <span class="comment">// Params for the motor system modelation</span>
<a name="l00240"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a3385c69ac8d9a736662ea9aa9078aa46">00240</a>                         vector_float <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a3385c69ac8d9a736662ea9aa9078aa46">weights</a>; <span class="comment">// length: 6 [0,5]</span>
<a name="l00241"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a30cfb01548bd024c17ae8beef3166176">00241</a>                         <span class="keywordtype">float</span>   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a30cfb01548bd024c17ae8beef3166176">minObstaclesHeight</a>, maxObstaclesHeight; <span class="comment">// The range of &quot;z&quot; coordinates for obstacles to be considered</span>
<a name="l00242"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ac18f10d52d45ce1b86ab7843bed9abda">00242</a>                         <span class="keywordtype">float</span>   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ac18f10d52d45ce1b86ab7843bed9abda">DIST_TO_TARGET_FOR_SENDING_EVENT</a>;
<a name="l00243"></a>00243 
<a name="l00244"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a3125254da7752dcd52b74ab446f4b842">00244</a>             <span class="keywordtype">float</span>       <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a3125254da7752dcd52b74ab446f4b842">DOOR_CROSSING_SEARCH_TARGET_DISTANCEx2</a>;
<a name="l00245"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ade9bfee6fa56b3ce1d811839fe861dac">00245</a>             <span class="keywordtype">float</span>       <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ade9bfee6fa56b3ce1d811839fe861dac">VORONOI_MINIMUM_CLEARANCE</a>;
<a name="l00246"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ae1c90d28b6abcce8a6659e748e134759">00246</a>             <span class="keywordtype">float</span>       <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ae1c90d28b6abcce8a6659e748e134759">DISABLE_PERIOD_AFTER_FAIL</a>;
<a name="l00247"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a9d4bb1934b673b35a1d5bd01fed3317d">00247</a>             <span class="keywordtype">float</span>       <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a9d4bb1934b673b35a1d5bd01fed3317d">VORONOI_PATH_DIST_FROM_DOORWAY</a>;
<a name="l00248"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a6f4c6ebc3ca66b81d49cdd5393a38838">00248</a>             <span class="keywordtype">float</span>       <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a6f4c6ebc3ca66b81d49cdd5393a38838">DOORCROSSING_HEADING_ACCURACY_DEG</a>;
<a name="l00249"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#aeccaee3f944ccaad497fca309193f6c5">00249</a>             <span class="keywordtype">float</span>       <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#aeccaee3f944ccaad497fca309193f6c5">DOORCROSSING_ROTATION_CTE_DEG</a>;
<a name="l00250"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a5dcf1d4a0702e09526d9ba0ee0cafb26">00250</a>                         <span class="keywordtype">float</span>   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a5dcf1d4a0702e09526d9ba0ee0cafb26">DOOR_CROSSING_DIST_TO_AUX_TARGETS</a>;
<a name="l00251"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a776fa85a7c3629314cb2ae1db3821716">00251</a>                         <span class="keywordtype">float</span>   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a776fa85a7c3629314cb2ae1db3821716">DOOR_CROOSING_BEH3_TIMEOUT</a>;
<a name="l00252"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a4b3b3166c62ba183a0d11c7b3aa1f934">00252</a>                         <span class="keywordtype">float</span>   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a4b3b3166c62ba183a0d11c7b3aa1f934">DOOR_CROSSING_MAXIMUM_DOORWAY_SIZE</a>;
<a name="l00253"></a>00253 
<a name="l00256"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#adf8c48199f2777ea50a7f7a4044ddf43">00256</a>                         <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#adf8c48199f2777ea50a7f7a4044ddf43">nIteration</a>;
<a name="l00257"></a>00257 
<a name="l00260"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#afc4cd625eda3e91fbd0edfcbf7a6a997">00260</a>                         <span class="keywordtype">float</span>                   <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#afc4cd625eda3e91fbd0edfcbf7a6a997">meanExecutionPeriod</a>;
<a name="l00261"></a>00261 
<a name="l00262"></a>00262 
<a name="l00265"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ac89cc775d654397d139905e3c44cf797">00265</a>                         <span class="keywordtype">float</span>                       <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ac89cc775d654397d139905e3c44cf797">badNavAlarm_minDistTarget</a>;
<a name="l00266"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ae4d5fb78f94bc99be66acae8eaf564cd">00266</a>                         mrpt::system::TTimeStamp        <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#ae4d5fb78f94bc99be66acae8eaf564cd">badNavAlarm_lastMinDistTime</a>;
<a name="l00267"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#adf0488e7d7731229e732b337c4286e16">00267</a>                         <span class="keywordtype">float</span>                       <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#adf0488e7d7731229e732b337c4286e16">badNavAlarm_AlarmTimeout</a>;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269 
<a name="l00272"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a92f62e4c330a4e5c1b6350023fe1a2e6">00272</a>                         math::CPolygon          <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a92f62e4c330a4e5c1b6350023fe1a2e6">robotShape</a>;
<a name="l00273"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#af068d302a382ad18b36ee08e5f26434d">00273</a>                         <span class="keywordtype">bool</span>                            <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#af068d302a382ad18b36ee08e5f26434d">collisionGridsMustBeUpdated</a>;
<a name="l00274"></a>00274 
<a name="l00277"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#af277137d9296f37fbbfe5879868dba01">00277</a>                         std::vector&lt;CParameterizedTrajectoryGenerator*&gt; <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#af277137d9296f37fbbfe5879868dba01">PTGs</a>;
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 
<a name="l00280"></a>00280                         <span class="comment">// Steps for the reactive navigation system.</span>
<a name="l00281"></a>00281                         <span class="comment">// ----------------------------------------------------------------------------</span>
<a name="l00282"></a>00282                         <span class="keywordtype">void</span>            STEP1_CollisionGridsBuilder();
<a name="l00283"></a>00283 
<a name="l00284"></a>00284                         <span class="keywordtype">bool</span>            STEP2_Sense(
<a name="l00285"></a>00285                                                                         mrpt::slam::CSimplePointsMap                                    &amp;out_obstacles);
<a name="l00286"></a>00286 
<a name="l00287"></a>00287                         <span class="keywordtype">void</span>            STEP3_SpaceTransformer(
<a name="l00288"></a>00288                                                                         poses::CPointsMap                                       &amp;in_obstacles,
<a name="l00289"></a>00289                                                                         CParameterizedTrajectoryGenerator       *in_PTG,
<a name="l00290"></a>00290                                                                         vector_double                                           &amp;out_TPObstacles);
<a name="l00291"></a>00291 
<a name="l00292"></a>00292                         <span class="keywordtype">void</span>            STEP4_HolonomicMethod(
<a name="l00293"></a>00293                                                                         vector_double                                           &amp;in_Obstacles,
<a name="l00294"></a>00294                                                                         poses::CPoint2D                                         &amp;in_Target,
<a name="l00295"></a>00295                                                                         <span class="keywordtype">float</span>                                                           in_maxRobotSpeed,
<a name="l00296"></a>00296                                                                         <a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html">THolonomicMovement</a>                                      &amp;out_selectedMovement,
<a name="l00297"></a>00297                                                                         CHolonomicLogFileRecordPtr                      &amp;in_HLFR );
<a name="l00298"></a>00298 
<a name="l00299"></a>00299                         <span class="keywordtype">void</span>            STEP5_Evaluator(
<a name="l00300"></a>00300                                                                         <a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html">THolonomicMovement</a>                                      &amp;in_holonomicMovement,
<a name="l00301"></a>00301                                                                         vector_double                                           &amp;in_TPObstacles,
<a name="l00302"></a>00302                                                                         poses::CPoint2D                                         &amp;WS_Target,
<a name="l00303"></a>00303                                                                         poses::CPoint2D                                         &amp;TP_Target,
<a name="l00304"></a>00304                                                                         <span class="keywordtype">bool</span>                                                            wasSelectedInLast,
<a name="l00305"></a>00305                                                                         CLogFileRecord::TInfoPerPTG                     &amp;log );
<a name="l00306"></a>00306 
<a name="l00307"></a>00307                         <span class="keywordtype">void</span>            STEP6_Selector(
<a name="l00308"></a>00308                                                                         std::vector&lt;THolonomicMovement&gt;         &amp;in_holonomicMovements,
<a name="l00309"></a>00309                                                                         <a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html">THolonomicMovement</a>                                      &amp;out_selectedHolonomicMovement,
<a name="l00310"></a>00310                                                                         <span class="keywordtype">int</span>                                                                     &amp;out_nSelectedPTG);
<a name="l00311"></a>00311 
<a name="l00312"></a>00312                         <span class="keywordtype">void</span>                    STEP7_NonHolonomicMovement(
<a name="l00313"></a>00313                                                                         <a class="code" href="structmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1THolonomicMovement.html">THolonomicMovement</a>                                      &amp;in_movement,
<a name="l00314"></a>00314                                                                         <span class="keywordtype">float</span>                                                           &amp;out_v,
<a name="l00315"></a>00315                                                                         <span class="keywordtype">float</span>                                                           &amp;out_w);
<a name="l00316"></a>00316 
<a name="l00317"></a>00317                         <span class="comment">//</span>
<a name="l00318"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a2fc9dff742b95487ee96815866da7046">00318</a>                         <span class="keywordtype">bool</span>                    <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem.html#a2fc9dff742b95487ee96815866da7046">CerrandoHilo</a>;
<a name="l00319"></a>00319 
<a name="l00320"></a>00320                         <span class="comment">// Para casos de errores:</span>
<a name="l00321"></a>00321                         <span class="keywordtype">void</span>                    Error_ParadaDeEmergencia( <span class="keyword">const</span> <span class="keywordtype">char</span> *msg );
<a name="l00322"></a>00322 
<a name="l00325"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1CDynamicWindow.html">00325</a>                         <span class="keyword">class </span><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1CDynamicWindow.html">CDynamicWindow</a>
<a name="l00326"></a>00326                         {
<a name="l00327"></a>00327                         <span class="keyword">public</span>:
<a name="l00328"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1CDynamicWindow.html#a3d25dbbaa071d1d2f2e6564908e541f2">00328</a>                                 <span class="keywordtype">float</span>   v_max, <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1CDynamicWindow.html#a3d25dbbaa071d1d2f2e6564908e541f2">v_min</a>;   <span class="comment">//  m/sec</span>
<a name="l00329"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1CDynamicWindow.html#a3305bd7a17a2b7bd9a0add4f43cb7c82">00329</a>                                 <span class="keywordtype">float</span>   w_max, <a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1CDynamicWindow.html#a3305bd7a17a2b7bd9a0add4f43cb7c82">w_min</a>;   <span class="comment">//  rad/sec</span>
<a name="l00330"></a>00330 
<a name="l00331"></a>00331                         <span class="keyword">private</span>:
<a name="l00332"></a><a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1CDynamicWindow.html#add64c2a3c557f5b618445c1ed122f3b2">00332</a>                                 <span class="keywordtype">float</span>   c1,c2,c3,<a class="code" href="classmrpt_1_1reactivenav_1_1YclopsNavigationSystem_1_1CDynamicWindow.html#add64c2a3c557f5b618445c1ed122f3b2">c4</a>;    <span class="comment">// Curvature of corners.</span>
<a name="l00333"></a>00333 
<a name="l00334"></a>00334                         <span class="keyword">public</span>:
<a name="l00335"></a>00335 
<a name="l00338"></a>00338                                 <span class="keywordtype">void</span>  findMinMaxCurvatures(<span class="keywordtype">float</span> &amp;minCurv, <span class="keywordtype">float</span> &amp;maxCurv);
<a name="l00339"></a>00339 
<a name="l00342"></a>00342                                 <span class="keywordtype">void</span>  findBestApproximation(<span class="keywordtype">float</span> desV,<span class="keywordtype">float</span> desW, <span class="keywordtype">float</span> &amp;outV,<span class="keywordtype">float</span> &amp;outW);
<a name="l00343"></a>00343 
<a name="l00344"></a>00344                         <span class="keyword">private</span>:
<a name="l00347"></a>00347                                 <span class="keywordtype">bool</span>  findClosestCut( <span class="keywordtype">float</span> cmd_v, <span class="keywordtype">float</span> cmd_w, <span class="comment">// IN</span>
<a name="l00348"></a>00348                                                                                                 <span class="keywordtype">float</span> &amp;out_v,<span class="keywordtype">float</span> &amp;out_w);     <span class="comment">// OUT</span>
<a name="l00349"></a>00349 
<a name="l00350"></a>00350                         };
<a name="l00351"></a>00351 
<a name="l00352"></a>00352                 };
<a name="l00353"></a>00353         }
<a name="l00354"></a>00354 }
<a name="l00355"></a>00355 
<a name="l00356"></a>00356 
<a name="l00357"></a>00357 <span class="preprocessor">#endif</span>
<a name="l00358"></a>00358 <span class="preprocessor"></span>
<a name="l00359"></a>00359 
</pre></div></div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Mar 16 2011 for YClops by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>

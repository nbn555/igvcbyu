#summary Information about how the camera code works

= Calibrate =
Location: branches->Sensors->Camera->Calibrate

This is a python user interface that helps calibrate the camera. It uses pretty much the same code that Y-Clop uses to detect obstacles.  The user interface shows what the camera is seeing and allows you to adjust settings and see how they affect the video feed. This helps when you want to change the threshold and other parameters depending on the environment you are in (indoors, cloudy, sunny). This obviously requires python to be running on the computer. To set up the camera module you need to run the setup.py file in the command line like:

{{{

python setup.py build
python setup.py install

}}}

This will compile the "Camera.cpp" file and turn it into a module for python to use. The parameters values for the user interface are loaded from YClops.ini. This is where all the parameters should be saved for the whole project. When you click save on the user interface, the parameter values get saved to the YClops.ini file.

To run the user interface:

{{{
python simpleGUI.py
}}}


= Camera =
location: trunk->Code->YClopsLib->src->Camera.cpp

Camera.cpp contains the code for finding obstacles. It uses openCV 2.2 libraries so make sure you have those installed. To start out the YClopsLib should only call doProcess and getData. When doProcess is called, the camera gets a frame from the video stream. It then thresholds the image to only show the white in the image. It then distorts the image by key-stoning it so that it is a true representation of the position of the camera. It then splits up the image into a grid. The grid size is determined by the YClops.ini file. It then goes through each cell in the grid and checks to see if an obstacle is in that part of the grid. It does this by measuring how much white is in that cell. If there is too much then it will be marked as containing an obstacle. Each cell corresponds to a different real valued x and y location in front of the robot. It then takes this grid and puts all the values into a map. This map is what is used by YClopsLib.
